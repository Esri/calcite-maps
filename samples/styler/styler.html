<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <!-- Lock viewport to prevent scaling -->
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
  <meta name="description" content="Calcite Maps Demo - ArcGIS">
  <meta name="author" content="">
  <link rel="icon" href="http://www.esri.com/favicon.ico">
  <title>Calcite Maps - ArcGIS Dojo</title>

  <!-- Bootstrap - For testing only -->
  <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css"> -->

  <!-- Calcite Maps -->
  <link rel="stylesheet" href="../../dist/css/calcite-maps-arcgis-4.x.min.css">
  
  <!-- ArcGIS JS 4.0 -->
  <link rel="stylesheet" href="http://js.arcgis.com/4.0/esri/css/main.css">
  <!--link rel="stylesheet" href="http://localhost/GitHub/arcgis-js-api/esri/css/main.css"-->

  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
    }

    /* 2D and 3D views */
    #mapViewDiv, #sceneViewDiv {
    }

    /* Search widget */
    #searchDiv {
    }
    
  </style>

</head>

<body class="calcite-maps nav-position-top">

  <!-- Navbar -->

  <nav class="navbar navbar-fixed-top calcite-text-dark">

    <div class="container-fluid">

      <!-- Header -->
  
      <div class="navbar-header">
        <a class="navbar-brand">
          <span class="esri-icon esri-icon-map-pin"></span>
        </a>
        <div class="navbar-title">
          <div class="navbar-main-title text-overflow" data-toggle="modal" data-target="#modalSplash">Styler</div>
          <div class="navbar-sub-title text-overflow" data-toggle="modal" data-target="#modalSplash">Explore styles and design layouts interactively</div> 
        </div>
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#mainNav" aria-expanded="false">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
      </div>

      <!-- Navbar Collapse -->

      <div id="mainNav" class="collapse navbar-collapse" aria-expanded="false">
        <!-- Main -->
        <ul class="nav navbar-nav navbar-right">                    
           <!-- Map and Scene -->
          <li class="active"><a id="mapNav" class="hidden-xs hidden-sm hidden" href="#2dTab" aria-controls="2Dtab" aria-expanded="true" role="tab" data-toggle="tab" data-tooltip="tip" title="2D View" data-placement="bottom">Map</a></li>
          <li><a id="sceneNav" class="hidden-xs hidden-sm hidden" href="#3dTab" aria-controls="3Dtab" role="tab" data-toggle="tab" data-tooltip="tip" title="3D View" data-placement="bottom">Scene</a></li>                  
          <li><form id="searchNav" class="navbar-form navbar-search hidden-xs visible-sm visible-md visible-lg"><div id="searchNavDiv"></div></form></li>
          <!-- Dropdown Menu -->
          <li class="dropdown" role="presentation">
            <a class="dropdown-toggle hidden-xs" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false"><span class="glyphicon glyphicon-menu-hamburger" aria-hidden="true"></span></a>
            <ul class="dropdown-menu">
              <li><a id="mapNavMenu" class="hidden-lg" href="#2dTab" aria-controls="2Dtab" role="tab" data-toggle="tab"> Map</a></li>
              <li><a id="sceneNavMenu" class="hidden-lg" href="#3dTab" aria-controls="3Dtab" role="tab" data-toggle="tab"> Scene</a></li>
              <li><a id="infoNavMenu"  role="button" data-target="#panelInfo" aria-haspopup="true"><span class="glyphicon glyphicon-info-sign"></span> Info</a></li>
              <li><a id="searchNavMenu" class="visible-xs" role="button" data-target="#panelSearch" aria-haspopup="true"><span class="glyphicon glyphicon-search"></span> Search</a></li>
              <li><a id="basemapsNavMenu"  role="button" data-target="#panelBasemaps" aria-haspopup="true"><span class="glyphicon glyphicon-th-large"></span> Basemaps</a></li>
              <li><a id="bookmarksNavMenu"  role="button" data-target="#panelBookmarks" aria-haspopup="true"><span class="glyphicon glyphicon-book"></span> Bookmarks</a></li>
              <li><a id="legendNavMenu"  role="button" data-target="#panelLegend" aria-haspopup="true"><span class="glyphicon glyphicon-list"></span> Legend</a></li>
              <li><a id="printNavMenu"  role="button" data-target="#panelPrint" aria-haspopup="true"><span class="glyphicon glyphicon-print"></span> Print</a></li>
              <li><a id="shareNavMenu"  role="button" data-target="#panelShare" aria-haspopup="true"><span class="glyphicon glyphicon-share"></span> Share</a></li>
              <li><a id="settingsMenu" role="button" data-target="#panelSettings" aria-haspopup="true"><span class="glyphicon glyphicon-cog"></span> Settings</a></li>
            </ul>
          </li>      
        </ul><!--/.nav -->
      </div><!--/.nav-collapse -->
    </div><!--/.container-fluid -->
  </nav><!--/.navbar -->

  <!-- Modal Window -->

  <div class="modal fade" id="modalSplash" tabindex="-1" role="dialog" aria-labelledby="splashlModal">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-body">
          <div class="container-fluid">
            <div class="row">
              <div class="splash-body">
                <div class="text-center">
                  <h3>Welcome to Calcite Maps</h3>
                  <hr>
                  <p>Calcite maps is a framework for designing web map apps with Calcite styles and Bootstrap. Use this application to explore the different colors, styles and layouts possible. Apply the styles you like to your own applications.</p>
                  <br>
                  <div class="form-inline">
                    <div class="form-group">
                      <button type="button" class="btn btn-success btn-lg"  data-dismiss="modal">Get started</a>
                    </div>
                  </div>
                  <br>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Map Container  -->

  <div class="map-container map-position-absolute">
    <div id="tabContainer" class="tab-content">
      <div id="2dTab" class="tab-pane fade in active" role="tabpanel">
        <div id="mapViewDiv"></div>
      </div>
      <div id="3dTab" class="tab-pane fade" role="tabpanel">
        <div id="sceneViewDiv"></div>
      </div>
    </div>
  </div><!-- /.container -->

  <!-- Panel -->

  <div class="panel-container">

    <!-- Collapsable panel -->
    <div id="panelAccordion" class="panel-group"  role="tablist" aria-multiselectable="true">
  
      <!-- Info Panel -->

       <div id="panelInfo" class="panel collapse">
        
        <div id="headingInfo" class="panel-heading" role="tab">
          <!-- <div class="panel-title hidden-xs"> -->
          <div class="panel-title">
            <a class="panel-toggle" role="button" data-toggle="collapse" href="#collapseInfo" data-parent="#panelAccordion" aria-expanded="true" aria-controls="collapseInfo"><span class="glyphicon glyphicon-info-sign" aria-hidden="true"></span> Info</a>
            
            <a class="panel-close" role="button" data-toggle="collapse" data-target="#panelInfo"><span class="esri-icon esri-icon-close" aria-hidden="true"></span></a>  
          </div>
        </div>

        <div id="collapseInfo" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingInfo">
          <div class="panel-body">
            <!-- <a class="panel-body-close visible-xs" role="button" data-toggle="collapse" data-target="#panelInfo"><span class="esri-icon esri-icon-close" aria-hidden="true"></span></a>      -->
            
            <p>This is a great place to describe what your application is about. Learn more about <a href="http://github.com/esri/calcite-maps"> calcite-maps</a>.</p>
          </div>
        </div>

      </div>


      <!-- Search Panel -->

      <!--div id="panelSearch" class="panel collapse hidden-sm hidden-md hidden-lg"-->
      <div id="panelSearch" class="panel collapse panel-mobile-only">
                
        <div id="headingSearch" class="panel-heading" role="tab">
          <div class="panel-title">
            <a class="panel-toggle collapsed" role="button" data-toggle="collapse" href="#collapseSearch" data-parent="#panelAccordion" aria-expanded="false" aria-controls="collapseSearch"><span class="glyphicon glyphicon-search" aria-hidden="true"></span> Search</a>

            <a class="panel-close" role="button" data-toggle="collapse" data-target="#panelSearch"><span class="esri-icon esri-icon-close" aria-hidden="true"></span></a>        
          </div>
        </div>
        
        <div id="collapseSearch" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingSearch">
          <div class="panel-body panel-overflow-visible"> 
            <div id="searchPanelDiv"></div>
          </div>
        </div>

      </div>

      <!-- Basemaps Panel -->

       <div id="panelBasemaps" class="panel collapse">
           
        <div id="headingBasemaps" class="panel-heading" role="tab">
          <div class="panel-title">
            <a class="panel-toggle collapsed" role="button" data-toggle="collapse" href="#collapseBasemaps" aria-expanded="false" data-parent="#panelAccordion"  aria-controls="collapseBasemaps"><span class="glyphicon glyphicon-th-large" aria-hidden="true"></span> Basemaps</a>

            <a class="panel-close" role="button" data-toggle="collapse" data-target="#panelBasemaps"><span class="esri-icon esri-icon-close" aria-hidden="true"></span></a>  
          </div>
        </div>
        
        <div id="collapseBasemaps" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingBasemaps">
          <div class="panel-body">
            <select id="selectBasemapPanel" class="form-control"> 
              <option value="streets" data-vector="streets-vector" selected>Streets</option>
              <option value="satellite" data-vector="satellite">Satellite</option>
              <option value="hybrid" data-vector="hybrid">Hybrid</option>
              <option value="national-geographic" data-vector="national-geographic">National Geographic</option>
              <option value="topo" data-vector="topo-vector">Topographic</option>
              <option value="gray" data-vector="gray-vector">Gray</option>
              <option value="dark-gray" data-vector="dark-gray-vector">Dark Gray</option>
              <option value="osm" data-vector="osm">Open Street Map</option>
              <option value="dark-gray" data-vector="streets-night-vector">Streets Night</option>
              <option value="streets" data-vector="streets-navigation-vector">Streets Navigation</option>
            </select>
          </div>
        </div>

      </div>

      <!-- Bookmarks Panel -->

      <div id="panelBookmarks" class="panel collapse">
      
        <div id="headingBookmarks" class="panel-heading" role="tab">
          <!-- <div class="panel-title hidden-xs"> -->
          <div class="panel-title">

          <a class="panel-toggle collapsed" role="button" data-toggle="collapse" href="#collapseBookmarks" data-parent="#panelAccordion" aria-expanded="false" aria-controls="collapseBookmarks"><span class="glyphicon glyphicon-book" aria-hidden="true"></span> Bookmarks</a>

          <a class="panel-close" role="button" data-toggle="collapse" data-target="#panelBookmarks"><span class="esri-icon esri-icon-close" aria-hidden="true"></span></a>  
          </div>
        </div>
       
        <div id="collapseBookmarks" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingBookmarks">
          <div class="panel-body">          
          <div id="carousel-example-generic" class="carousel slide" data-ride="carousel">
            <ol class="carousel-indicators">
            <li data-target="#carousel-example-generic" data-slide-to="0" class="active"></li>
            <li data-target="#carousel-example-generic" data-slide-to="1"></li>
            <li data-target="#carousel-example-generic" data-slide-to="2"></li>
            </ol>
            <div class="carousel-inner" role="listbox">
            <div class="item active">
              <img src="https://placeholdit.imgix.net/~text?txtsize=33&txt=300%C3%97200&w=300&h=200" alt="...">
              <div class="carousel-caption">
              <!-- Your caption goes here -->
              </div>
            </div>
            <div class="item">
              <img src="https://placeholdit.imgix.net/~text?txtsize=33&txt=300%C3%97200&w=300&h=200" alt="...">
              <div class="carousel-caption">
              <!-- Your caption goes here -->
              </div>
            </div>

            <div class="item">
              <img src="https://placeholdit.imgix.net/~text?txtsize=33&txt=300%C3%97200&w=300&h=200" alt="...">
              <div class="carousel-caption">
              <!-- Your caption goes here -->                            
              </div>
            </div>
            </div>
            <a class="left carousel-control" href="#carousel-example-generic" role="button" data-slide="prev">
            <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
            </a>
            <a class="right carousel-control" href="#carousel-example-generic" role="button" data-slide="next">
            <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
            </a>
          </div>
          </div>
        </div>
      </div>

      <!-- Legend Panel -->

      <div id="panelLegend" class="panel collapse">
      
        <div id="headingLegend" class="panel-heading" role="tab">
          <!-- <div class="panel-title hidden-xs"> -->
          <div class="panel-title">

            <a class="panel-toggle collapsed" role="button" data-toggle="collapse" href="#collapseLegend" aria-expanded="false" data-parent="#panelAccordion" aria-controls="collapseLegend"><span class="glyphicon glyphicon-list" aria-hidden="true"></span> Legend</a>

            <a class="panel-close" role="button" data-toggle="collapse" data-target="#panelLegend"><span class="esri-icon esri-icon-close" aria-hidden="true"></span></a> 
          </div>
        </div>

        <div id="collapseLegend" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingLegend">
          <div class="panel-body">            
            <div id="legendDiv"></div>
          </div>
        </div>
      
      </div>
      
      <!-- Print Panel -->

      <div id="panelPrint" class="panel collapse">
            
        <div id="headingPrint" class="panel-heading">
          <!-- <div class="panel-title hidden-xs"> -->
          <div class="panel-title">
            <a class="panel-toggle collapsed" role="button" data-toggle="collapse" href="#collapsePrint" data-parent="#panelAccordion" aria-expanded="false" aria-controls="collapsePrint"><span class="glyphicon glyphicon-print" aria-hidden="true"></span> Print</a>

            <a class="panel-close" role="button" data-toggle="collapse" data-target="#panelPrint"><span class="esri-icon esri-icon-close" aria-hidden="true"></span></a>
          </div>
        </div>
      
        <div id="collapsePrint" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingPrint">
          <div class="panel-body">
          <div class="form-group">
             <button type="button" class="btn btn-default">Print</button>
          </div>

          </div>
        </div>
      </div>

      <!-- Share Panel -->

      <div id="panelShare" class="panel collapse">
                
        <div id="headingShare" class="panel-heading">
          <!-- <div class="panel-title hidden-xs"> -->
          <div class="panel-title">

          <a class="panel-toggle collapsed" role="button" data-toggle="collapse" href="#collapseShare" data-parent="#panelAccordion" aria-expanded="false" aria-controls="collapseShare"><span class="glyphicon glyphicon-share" aria-hidden="true"></span> Share</a>                

          <a class="panel-close" role="button" data-toggle="collapse" data-target="#panelShare"><span class="esri-icon esri-icon-close" aria-hidden="true"></span></a>  
          </div>
        </div>

        <div id="collapseShare" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingShare">
          <div class="panel-body">
            <p>Share  [Coming soon!]</p>
          </div>
        </div>

      </div>

      <!-- Settings/Configure Panel -->

      <div id="panelSettings" class="panel collapse in">
                
        <div id="headingSettings" class="panel-heading">
          <!-- <div class="panel-title hidden-xs"> -->
          <div class="panel-title">
            <a class="panel-toggle" role="button" data-toggle="collapse" href="#collapseSettings" data-parent="#panelAccordion" aria-expanded="true" aria-controls="collapseSettings"><span class="glyphicon glyphicon-cog" aria-hidden="true"></span> Settings</a>

            <a class="panel-close" role="button" data-toggle="collapse" data-target="#panelSettings"><span class="esri-icon esri-icon-close" aria-hidden="true"></span></a>
          </div>
        </div>
        
        <div id="collapseSettings" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="headingSettings">
          <div class="panel-body">
            <ul class="nav nav-tabs" role="tablist">
              <li role="presentation" class="active"><a href="#title" aria-controls="title" role="tab" data-toggle="tab">Name</a></li>
              <li role="presentation"><a href="#map" aria-controls="map" role="tab" data-toggle="tab">Map</a></li>
              <li role="presentation"><a href="#theme" aria-controls="theme" role="tab" data-toggle="tab">Theme</a></li>
              <li role="presentation"><a href="#custom" aria-controls="custom" role="tab" data-toggle="tab">Layout</a></li>
            </ul>

            <div class="tab-content">

              <!-- Tab -Title -->
            
              <div role="tabpanel" class="tab-pane active" id="title">  
                <div class="form-title">1. Set the map name and call to action</div>  
                <div class="form-horizontal form-padding">
                  <div class="form-group">
                    <label for="settingsTitleInput" class="col-xs-3 control-label">Title</label>
                    <div class="col-xs-9">
                      <input type="text" class="form-control" id="settingsTitleInput" placeholder="{Map Name}">
                    </div>
                  </div>
                  <div class="form-group">
                    <label for="settingsSubTitleInput" class="col-xs-3 control-label">SubTitle</label>
                    <div class="col-xs-9">
                      <input type="text" class="form-control" id="settingsSubTitleInput" placeholder="{Subtitle - Call to action}">
                    </div>
                  </div>
                  <div class="form-group">
                    <div class="col-xs-9 col-xs-offset-3">
                      <button id="titleButton" type="button" class="btn btn-primary btn-block">Apply</button>
                    </div>
                  </div>

                </div>
              </div>

              <!-- Tab - Map -->

              <div role="tabpanel" class="tab-pane" id="map">
                <div class="form-title">2. Set the location, basemap and layer</div>  
                <div class="form-horizontal form-padding">
                  <div class="form-group">
                    <label for="settingsSearch" class="col-xs-3 control-label">Location</label>
                    <div class="col-xs-9">
                      <div id="settingsSearchDiv" class="esri-search-form"></div>
                    </div>
                  </div>
                  <div class="form-group">
                    <label for="settingsSelectBasemap" class="col-xs-3 control-label">Basemap</label>
                    <div class="col-xs-9">
                      <select id="settingsSelectBasemap" class="form-control">                            
                        <option value="streets" data-vector="streets-vector" selected>Streets</option>
                        <option value="satellite" data-vector="satellite">Satellite</option>
                        <option value="hybrid" data-vector="hybrid">Hybrid</option>
                        <option value="national-geographic" data-vector="national-geographic">National Geographic</option>
                        <option value="topo" data-vector="topo-vector">Topographic</option>
                        <option value="gray" data-vector="gray-vector">Gray</option>
                        <option value="dark-gray" data-vector="dark-gray-vector">Dark Gray</option>
                        <option value="osm" data-vector="osm">Open Street Map</option>
                        <option value="dark-gray" data-vector="streets-night-vector">Streets Night</option>
                        <option value="streets" data-vector="streets-navigation-vector">Streets Navigation</option>
                      </select>
                    </div>
                  </div>
                  <div class="form-group">
                    <label for="settingsView" class="col-xs-3 control-label">View</label>
                    <div class="col-xs-9">
                      <label class="checkbox-inline">
                        <input type="checkbox" id="settings2dView" value=""> 2D
                      </label>
                      <label class="checkbox-inline">
                        <input type="checkbox" id="settings3dView" value=""> 3D
                      </label>
                    </div>
                  </div>
                  <div class="form-group">
                    <label for="settingsAddLayer" class="col-xs-3 control-label">Layer</label>
                    <div class="col-xs-9">
                      <input type="text" class="form-control" id="settingsFeatureLayerUrl" placeholder="http://services.arcgis.com/uCXeTVveQzP4IIcx/arcgis/rest/services/GreaterLosAngelesAreaDemographics/FeatureServer/0" value="http://services.arcgis.com/uCXeTVveQzP4IIcx/arcgis/rest/services/GreaterLosAngelesAreaDemographics/FeatureServer/0">
                    </div>
                  </div>
                  <div class="form-group">
                    <label for="settingsLayerOpacity" class="col-xs-3 control-label">Opacity</label>
                    <div class="col-xs-9">
                      <select id="settingsLayerOpacity" class="form-control">
                        <option value="0.25">0.25</option>
                        <option value="0.50">0.5</option>
                        <option value="0.75">0.75</option>
                        <option value="1.0" selected>1.0</option>
                      </select>
                    </div>
                  </div>
                  <div class="form-group">
                    <div class="col-xs-9 col-xs-offset-3">
                      <button id="settingsAddLayer" type="button" class="btn btn-primary btn-block">Add Layer</button>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Tab - Theme -->

              <div role="tabpanel" class="tab-pane" id="theme">
                <div class="form-title">3. Set the theme and colors</div>  
                <div class="form-horizontal form-padding">

                  <!-- Theme -->
                  
                  <div class="form-group">
                    <label for="settingsTheme" class="col-xs-4 control-label">Theme</label>
                    <div class="col-xs-8">
                      <select id="settingsTheme" class="form-control">
                        <option value="" data-textcolor="calcite-text-dark" selected>Calcte Light</option>
                        <option value="calcite-theme-dark" data-textcolor="calcite-text-light">Calcite Dark</option>
                      </select>
                    </div>
                  </div>
        
                  <!-- Nav - Background Color -->

                  <div class="form-group">
                    <label for="settingsNav" class="col-xs-4 control-label">Nav Color</label>
                    <div class="col-xs-8">
                      <select id="settingsNav" class="form-control">
                        <option value="default" data-theme="calcite-theme-light">Calcite Default</option>

                        <option value="calcite-transparent" data-textcolor="calcite-text-dark">Calcite Transparent - Dark Text</option>
                        <option value="calcite-transparent" data-textcolor="calcite-text-light">Calcite Transparent - Light Text</option>
                        
                        <option value="calcite-white" data-textcolor="calcite-text-dark">--- White ---</option>
                        <option value="calcite-white" data-textcolor="calcite-text-dark">Calcite White</option>
                        <option value="calcite-white-75" data-textcolor="calcite-text-dark">Calcite White 75%</option>
                        <option value="calcite-white-50" data-textcolor="calcite-text-dark">Calcite White 50%</option>
                        <option value="calcite-white-25" data-textcolor="calcite-text-dark">Calcite White 25%</option>
                        <option value="calcite-off-white" data-textcolor="calcite-text-dark">Calcite Off White</option>
                        
                        <option value="calcite-grey" data-textcolor="calcite-text-light">--- Grey ---</option>
                        <option value="calcite-lightest-grey" data-textcolor="calcite-text-dark">Calcite Lightest Grey</option>
                        <option value="calcite-lighter-grey" data-textcolor="calcite-text-dark">Calcite Lighter Grey</option>
                        <option value="calcite-light-grey" data-textcolor="calcite-text-dark">Calcite Light Grey</option>
                        <option value="calcite-grey" data-textcolor="calcite-text-light">Calcite Grey</option>
                        <option value="calcite-grey-75" data-textcolor="calcite-text-light">Calcite Grey 75%</option>
                        <option value="calcite-grey-50" data-textcolor="calcite-text-dark">Calcite Grey 50%</option>
                        <option value="calcite-grey-25" data-textcolor="calcite-text-dark">Calcite Grey 25%</option>
                        <option value="calcite-dark-grey" data-textcolor="calcite-text-light">Calcite Dark Grey</option>
                        <option value="calcite-darker-grey" data-textcolor="calcite-text-light">Calcite Darker Grey</option>
                        <option value="calcite-darkest-grey" data-textcolor="calcite-text-light">Calcite Darkest Grey</option>
                        
                        <option value="calcite-black" data-textcolor="calcite-text-light">--- Black ---</option>
                        <option value="calcite-true-black" data-textcolor="calcite-text-light">Calcite True Black</option>
                        <option value="calcite-off-black" data-textcolor="calcite-text-light">Calcite Off Black</option>
                        <option value="calcite-black" data-textcolor="calcite-text-light">Calcite Black</option>
                        <option value="calcite-black-75" data-textcolor="calcite-text-light">Calcite Black 75%</option>
                        <option value="calcite-black-50" data-textcolor="calcite-text-light">Calcite Black 50%</option>
                        <option value="calcite-black-25" data-textcolor="calcite-text-light">Calcite Black 25%</option>
                        
                        <option value="calcite-dark-blue" data-textcolor="calcite-text-light">--- Blue ---</option>
                        <option value="calcite-dark-blue" data-textcolor="calcite-text-light">Calcite Dark Blue</option>
                        <option value="calcite-blue" data-textcolor="calcite-text-light">Calcite Blue</option>
                        <option value="calcite-blue-75" data-textcolor="calcite-text-light">Calcite Blue 75%</option>
                        <option value="calcite-blue-50" data-textcolor="calcite-text-light">Calcite Blue 50%</option>
                        <option value="calcite-blue-25" data-textcolor="calcite-text-dark">Calcite Blue 25%</option>
                        <option value="calcite-light-blue" data-textcolor="calcite-text-dark">Calcite Light Blue</option>
                        
                        <option value="calcite-dark-green" data-textcolor="calcite-text-light">--- Green ---</option>
                        <option value="calcite-dark-green" data-textcolor="calcite-text-light">Calcite Dark Green</option>
                        <option value="calcite-green" data-textcolor="calcite-text-light">Calcite Green</option>
                        <option value="calcite-green-75" data-textcolor="calcite-text-light">Calcite Green 75%</option>
                        <option value="calcite-green-50" data-textcolor="calcite-text-light">Calcite Green 50%</option>
                        <option value="calcite-green-25" data-textcolor="calcite-text-dark">Calcite Green 25%</option>
                        <option value="calcite-light-green" data-textcolor="calcite-text-dark">Calcite Light Green</option>
                        
                        <option value="calcite-red" data-textcolor="calcite-text-light">--- Red ---</option>
                        <option value="calcite-dark-red" data-textcolor="calcite-text-light">Calcite Dark Red</option>
                        <option value="calcite-red" data-textcolor="calcite-text-light">Calcite Red</option>
                        <option value="calcite-red-75" data-textcolor="calcite-text-light">Calcite Red 75%</option>
                        <option value="calcite-red-50" data-textcolor="calcite-text-light">Calcite Red 50%</option>
                        <option value="calcite-red-25" data-textcolor="calcite-text-dark">Calcite Red 25%</option>
                        <option value="calcite-light-red" data-textcolor="calcite-text-dark">Calcite Light Red</option>
                        
                        <option value="calcite-orange" data-textcolor="calcite-text-light">--- Orange ---</option>
                        <option value="calcite-dark-orange" data-textcolor="calcite-text-light">Calcite Dark Orange</option>
                        <option value="calcite-orange" data-textcolor="calcite-text-light">Calcite Orange</option>
                        <option value="calcite-orange-75" data-textcolor="calcite-text-light">Calcite Orange 75%</option>
                        <option value="calcite-orange-50" data-textcolor="calcite-text-light">Calcite Orange 50%</option>
                        <option value="calcite-orange-25" data-textcolor="calcite-text-dark">Calcite Orange 25%</option>
                        <option value="calcite-light-orange" data-textcolor="calcite-text-dark">Calcite Light Orange</option>
                        
                        <option value="calcite-yellow" data-textcolor="calcite-text-dark">--- Yellow ---</option>
                        <option value="calcite-dark-yellow" data-textcolor="calcite-text-light">Calcite Dark Yellow</option>
                        <option value="calcite-yellow" data-textcolor="calcite-text-dark">Calcite Yellow</option>
                        <option value="calcite-yellow-75" data-textcolor="calcite-text-dark">Calcite Yellow 75%</option>
                        <option value="calcite-yellow-50" data-textcolor="calcite-text-dark">Calcite Yellow 50%</option>
                        <option value="calcite-yellow-25" data-textcolor="calcite-text-dark">Calcite Yellow 25%</option>
                        <option value="calcite-light-yellow" data-textcolor="calcite-text-dark">Calcite Light Yellow</option>

                        <option value="calcite-purple" data-textcolor="calcite-text-light">--- Purple ---</option>
                        <option value="calcite-dark-purple" data-textcolor="calcite-text-light">Calcite Dark Purple</option>
                        <option value="calcite-purple" data-textcolor="calcite-text-light">Calcite Purple</option>
                        <option value="calcite-purple-75" data-textcolor="calcite-text-light">Calcite Purple 75%</option>
                        <option value="calcite-purple-50" data-textcolor="calcite-text-dark">Calcite Purple 50%</option>
                        <option value="calcite-purple-25" data-textcolor="calcite-text-dark">Calcite Purple 25%</option>
                        <option value="calcite-light-purple" data-textcolor="calcite-text-dark">Calcite Light Purple</option>

                        <option value="calcite-brown" data-textcolor="calcite-text-light">--- Brown ---</option>
                        <option value="calcite-dark-brown" data-textcolor="calcite-text-light">Calcite Dark Brown</option>
                        <option value="calcite-brown" data-textcolor="calcite-text-light">Calcite Brown</option>
                        <option value="calcite-brown-75" data-textcolor="calcite-text-light">Calcite Brown 75%</option>
                        <option value="calcite-brown-50" data-textcolor="calcite-text-dark">Calcite Brown 50%</option>
                        <option value="calcite-brown-25" data-textcolor="calcite-text-dark">Calcite Brown 25%</option>
                        <option value="calcite-light-brown" data-textcolor="calcite-text-dark">Calcite Light Brown</option>
                        
                      </select>
                    </div>
                  </div>

                  <!-- Nav Text - Override navbar text color-->
                  
                  <div class="form-group">
                    <label for="settingsNavText" class="col-xs-4 control-label">Nav Text</label>
                    <div class="col-xs-8">
                      <select id="settingsNavText" class="form-control">
                        <option value="calcite-text-light" selected>Light</option>
                        <option value="calcite-text-dark">Dark</option>
                      </select>
                    </div>
                  </div>
                  
                  <!-- Widgets -->
                  
                  <div class="form-group">
                    <label for="settingsWidgets" class="col-xs-4 control-label">Widgets</label>
                    <div class="col-xs-8">
                      <select id="settingsWidgets" class="form-control">
                        <option value="calcite-widgets-light" selected>Calcte Light</option>
                        <option value="calcite-widgets-dark">Calcite Dark</option>
                      </select>
                    </div>
                  </div>
                </div>
              </div>


              <!-- Tab - Layout/Widgets -->

              <div role="tabpanel" class="tab-pane" id="custom">
                <div class="form-title">4. Set the layout and widget position</div>  
                <div class="form-horizontal form-padding">
                  
                  <!-- Layout -->

                  <div class="form-group">
                    <label for="settingsLayout" class="col-xs-3 control-label">Layout</label>
                    <div class="col-xs-9">
                      <select id="settingsLayout" class="form-control">
                        <option value="layout-top" selected>Top (Default)</option>
                        <option value="layout-top-space">Top Space</option>
                        <option value="layout-top-space-all">Top Space All</option>
                        <option value="layout-top-fixed">Top Above Map</option>
                        <option value="layout-bottom">Bottom</option>
                        <option value="layout-bottom-space">Bottom Space</option>
                        <option value="layout-bottom-space-all">Bottom Space All</option>
                        <option value="layout-bottom-fixed">Bottom Below Map</option>
                        <option value="layout-top">--- Themes ---</option>
                        <option value="layout-jumbo-title-top">Jumbo Title Top</option>
                        <option value="layout-jumbo-title-bottom">Jumbo Title Bottom</option>
                        <option value="layout-mobile-focus-top">Mobile Focus Top</option>
                        <option value="layout-mobile-focus-bottom">Mobile Focus Bottom</option>
                        <option value="layout-inline-right">Inline Zoom Right</option>
                        <option value="layout-inline-left">Inline Zoom Left</option>
                      </select>
                    </div>
                  </div>

                  <!-- Add Widgets - Map -->

                  <div class="form-group">
                    <label for="settingsMap" class="col-xs-3 control-label">Map</label>
                    <div class="col-xs-4">
                      <select id="settingsMapWidget" class="form-control">
                        <option value="zoom" selected>Zoom</option>
                        <option value="home">Home</option>
                        <option value="locate">Locate</option>
                        <option value="compass">Compass</option>
                        <option value="basemaptoggle">Basemaptoggle</option>
                        <option value="search">Search</option>
                      </select>
                    </div>
                    <div class="col-xs-5">
                      <select id="settingsPositionMapWidget" class="form-control">
                        <option value="top-left" selected>TopLeft</option>
                        <option value="top-right">TopRight</option>
                        <option value="bottom-right">BottomRight</option>
                        <option value="bottom-left">BottomLeft</option>
                        <option value="none">-- Delete --</option>
                      </select>
                    </div>
                  </div>

                  <!-- Add Widgets - Scene -->

                  <div class="form-group">
                    <label for="settingsScene" class="col-xs-3 control-label">Scene</label>
                    <div class="col-xs-4">
                      <select id="settingsSceneWidget" class="form-control">
                        <option value="zoom" selected>Zoom</option>
                        <option value="home">Home</option>
                        <option value="locate">Locate</option>
                        <option value="compass">Compass</option>
                        <option value="basemaptoggle">Basemaptoggle</option>
                        <option value="search">Search</option>
                      </select>
                    </div>
                    <div class="col-xs-5">
                      <select id="settingsPositionSceneWidget" class="form-control">
                        <option value="top-left" selected>TopLeft</option>
                        <option value="top-right">TopRight</option>
                        <option value="bottom-right">BottomRight</option>
                        <option value="bottom-left">BottomLeft</option>
                        <option value="none">-- Delete --</option>
                      </select>
                    </div>
                  </div>
                  
                  <!-- Popup dock position -->

                  <div class="form-group">
                    <label for="settingsPopup" class="col-xs-3 control-label">Popup</label>
                    <div class="col-xs-9">
                      <select id="settingsPopup" class="form-control">
                        <option value="auto" selected>Auto</option>
                        <option value="top-left">Top Left</option>
                        <option value="top-center">Top Center</option>
                        <option value="top-right">Top Right</option>
                        <option value="bottom-right">Bottom Right</option>
                        <option value="bottom-center">Bottom Center</option>
                        <option value="bottom-left">Bottom Left</option>
                      </select>
                    </div>
                  </div>

                  <!-- Padding - map and scene -->

                  <div class="form-group">
                    <label for="settingsPopup" class="col-xs-3 control-label">Padding</label>
                    <div class="col-xs-9">
                      <input id="settingsPadding" class="form-control" value="{top: 65, bottom: 0, right: 0, left: 0}">
                    </div>
                  </div>

                  <!-- Padding - left and right -->

                  <div class="form-group">
                    <label for="settingsPanel" class="col-xs-3 control-label">Panel</label>
                    <div class="col-xs-9">
                      <select id="settingsPanel" class="form-control">
                        <option value="panel-left">PanelLeft</option>
                        <option value="panel-right" selected>PanelRight</option>
                      </select>
                    </div>
                  </div>
                  <!--div class="form-group">
                    <div class="col-xs-9 col-xs-offset-3">
                      <button id="settingsResetLayout" class="btn btn-danger btn-block">Reset All</button>
                    </div>
                  </div-->
                </div> 
              </div>

            

            </div><!-- /.tab-content -->
          </div><!-- /.panel-body -->
        </div><!-- /.panel-collapse --> 
      </div><!-- /.panel -->
    </div> <!-- /.panel-group -->
  </div> <!-- /.panel-container -->

  <script type="text/javascript">
    var dojoConfig = {
      packages: [{
        name: "bootstrap",
        location: location.pathname.replace(/\/[^/]+$/, "") + "./../../dist/vendor/dojo-bootstrap"
      },
      {
        name: "calcite-maps",
        location: location.pathname.replace(/\/[^/]+$/, "") + "./../../dist/js/dojo"
      },
      {
        name: "calcite-settings",
        location: location.pathname.replace(/\/[^/]+$/, "") + "/js"
      }]
    };
  </script>

  <!-- ArcGIS JS 4.0 -->
  <script src="http://js.arcgis.com/4.0/"></script>

  <script>
    
    var app;

    require([
      // ArcGIS
      "esri/Map",
      "esri/Basemap",
      "esri/layers/VectorTileLayer",
      "esri/views/MapView",
      "esri/views/SceneView",
      "esri/widgets/Search",
      "esri/widgets/Popup",
      "esri/widgets/Legend",
      "esri/core/watchUtils",
      "dojo/query",
      "dojo/dom",
      "dojo/on",

      // Boostrap
      "bootstrap/Collapse", 
      "bootstrap/Dropdown",
      "bootstrap/Tab",
      "bootstrap/Carousel",
      "bootstrap/Tooltip",
      "bootstrap/Modal",

      // Calcite Maps
      "calcite-maps/calcitemaps",
      "calcite-settings/panelsettings",

      // Dojo
      "dojo/domReady!"
    ], function(Map, Basemap, VectorTileLayer, MapView, SceneView, Search, Popup, Legend, watchUtils, query, dom, on) {
      
      app = {
        scale: 100000000,
        zoom: 2,
        lonlat: [-40,40],
        mapView: null, 
        mapDiv: "mapViewDiv",
        mapFL: null,
        vectorLayer: null,
        sceneView: null, 
        sceneDiv: "sceneViewDiv",
        sceneFL: null,
        activeView: null,
        searchWidgetNav: null, 
        searchWidgetPanel: null, 
        searchWidgetSettings: null,
        basemapSelected: "streets-vector",
        basemapSelectedAlt: "streets",
        viewUI: { 
          top: 65,
          right: 0,
          bottom: 0,
          left: 0
        }, 
        widgetsUI: { 
          components:["zoom", "attribution", "home"],
          padding: {
            top: 15,
            right: 15,
            bottom: 30,
            left: 15
          }
        },
        popupOptions: {
          autoPanEnabled: true,
          messageEnabled: false,
          spinnerEnabled: false,
          dockOptions: {
            buttonEnabled: true,
            breakpoint: {
              width: 767
            }
          }
        }
      }

      // Create visual components and attach handlers
      init();

      function init() {

        //2D - MapView
        app.mapView = new MapView({
          container: app.mapDiv,
          map: new Map( { basemap: app.basemapSelected } ),
          scale: app.scale,
          center: app.lonlat, 
          padding: app.viewUI,
          ui: app.widgetsUI, 
          popup: new Popup(app.popupOptions),
          visible: true
        });

        //Set active view
        app.activeView = app.mapView;

        //3D - SceneView
        app.sceneView = new SceneView({ 
          container: app.sceneDiv,
          map: new Map( { basemap: app.basemapSelectedAlt } ),
          scale: app.scale,
          center: app.lonlat, 
          padding: app.viewUI,
          ui: app.widgetsUI, 
          popup: new Popup(app.popupOptions),
          visible: false
        });
                        
        //TODO - Search Nav + Panel (detach/attach)
        app.mapView.then( function() {
          app.searchWidgetNav = createSearchWidget("searchNavDiv", true);
          app.searchWidgetPanel = createSearchWidget("searchPanelDiv", true);
          app.searchWidgetSettings = createSearchWidget("settingsSearchDiv", false);
        });
      }
      
      // Hide panel when popup is docked
      app.mapView.popup.watch("currentDockPosition", function(result) { 
        hidePanel(this, result) 
      });
      app.sceneView.popup.watch("currentDockPosition", function(result) { 
        hidePanel(this, result) 
      });

      // Hide panel when popup is docked
      function hidePanel(popup, result) {
        if (popup.visible && (result === "top-right" || result === "bottom-center")) {
          query(".panel.in").removeClass("in");
        }
      }

      function createSearchWidget(parentId, showPopup) {
        var search = new Search({
          viewModel: {
            view: app.activeView,
            showPopupOnSelect: showPopup,
            highlightEnabled: false
          },
          }, parentId);
        search.startup();
        return search;
      } 

      function syncViews(fromView, toView) {
        if (!toView.ready) {
          watchUtils.whenTrueOnce(toView, "ready").then(function(isReady) {
            toView.set({ viewpoint: fromView.viewpoint });
          });
        } else {
          toView.set({ viewpoint: fromView.viewpoint });
        }
      }

      query("nav li a[data-toggle='tab']").on("click", function(e) {
        if (e.target.text === "Map") {
          syncViews(app.sceneView, app.mapView);
          app.activeView = app.mapView;
        } else {
          syncViews(app.mapView, app.sceneView);
          app.activeView = app.sceneView; 
        }
        app.searchWidgetNav.viewModel.view = app.activeView;
        app.searchWidgetPanel.viewModel.view = app.activeView;
        app.searchWidgetSettings.viewModel.view = app.activeView;

        app.activeView.popup.set({
          visible: false
        });
      });
    
      query("#selectBasemapPanel, #settingsSelectBasemap").on("change", function(e){
        app.basemapSelected = e.target.options[e.target.selectedIndex].dataset.vector;
        app.basemapSelectedAlt = e.target.value;
        setBasemaps();               
      });

      function setBasemaps() {
        app.mapView.map.basemap = app.basemapSelected;
        app.sceneView.map.basemap = app.basemapSelectedAlt;
      }   

      // Collapsible popup (optional)
      query(".esri-popup .esri-title").on("click", function(e){
        query(".esri-popup .esri-container").toggleClass("esri-popup-collapsed");
        app.activeView.popup.reposition();
      });

    });// dojo
  </script>

</body>
</html>

